-- Load UI Library (Fallback Safe)
local success, Fluent = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/khoitongdz/ui/refs/heads/main/.gitignore"))()
end)

if not success then
    warn("Failed to load Fluent UI. Aborting script.")
    return
end

-- Create Window
local Window = Fluent:CreateWindow({
    Title = "Kenon Hub",
    SubTitle = "Blox Fruits Script",
    TabWidth = 120,
    Size = UDim2.fromOffset(600, 400),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.End
})

print([[ 
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•
]])
print("ðŸ”¥ Kenon Hub for Blox Fruits ðŸ”¥")

-- Services and Player Setup
local player = game.Players.LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")
local workspaceEnemies = game.Workspace:WaitForChild("Enemies")

-- Global Toggles
_G.AutoBone = false
_G.AutoFarmLevel = false
_G.AutoFarmBoss = false
_G.FastAttack = false

-- Functions
local function findNearestEnemy()
    local closestEnemy = nil
    local shortestDistance = math.huge

    for _, enemy in pairs(workspaceEnemies:GetChildren()) do
        if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
            local distance = (enemy.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if distance < shortestDistance then
                closestEnemy = enemy
                shortestDistance = distance
            end
        end
    end

    return closestEnemy
end

local function attackEnemy(target)
    if replicatedStorage:FindFirstChild("RemoteEvent") then
        replicatedStorage.RemoteEvent:FireServer("Attack", target)
    else
        warn("RemoteEvent not found!")
    end
end

local function teleportToLocation(locationCFrame)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = locationCFrame
    end
end

-- Auto Farm Logic
local function autoFarmLevel()
    spawn(function()
        while _G.AutoFarmLevel do
            pcall(function()
                -- Set NPC position or adjust to current level
                local questNPC = CFrame.new(0, 0, 0) -- Replace with specific NPC position
                teleportToLocation(questNPC)
                replicatedStorage.Remotes.CommF_:InvokeServer("StartQuest", "QuestNameHere", 1)

                for _, enemy in pairs(workspaceEnemies:GetChildren()) do
                    if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        attackEnemy(enemy)
                    end
                end
            end)
            wait(0.1)
        end
    end)
end

local function autoFarmBoss()
    spawn(function()
        while _G.AutoFarmBoss do
            pcall(function()
                local bossCFrame = CFrame.new(1000, 100, 2000) -- Update to boss location
                teleportToLocation(bossCFrame)

                for _, enemy in pairs(workspaceEnemies:GetChildren()) do
                    if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        if enemy.Name == "BossNameHere" then
                            attackEnemy(enemy)
                        end
                    end
                end
            end)
            wait(0.1)
        end
    end)
end

local function fastAttack()
    spawn(function()
        while _G.FastAttack do
            pcall(function()
                replicatedStorage.Remotes.CommF_:FireServer("FastAttack")
            end)
            wait(0.01) -- Adjust for attack speed
        end
    end)
end

-- Farming Tab
local farmingTab = Window:AddTab("Farming")
farmingTab:AddToggle("Auto Farm Level", {
    Title = "Enable Auto Farm Level",
    Default = false,
    Callback = function(value)
        _G.AutoFarmLevel = value
        if value then
            autoFarmLevel()
        end
    end
})

farmingTab:AddToggle("Auto Farm Boss", {
    Title = "Enable Auto Farm Boss",
    Default = false,
    Callback = function(value)
        _G.AutoFarmBoss = value
        if value then
            autoFarmBoss()
        end
    end
})

farmingTab:AddToggle("Auto Farm Bone", {
    Title = "Enable Auto Farm Bone",
    Default = false,
    Callback = function(value)
        _G.AutoBone = value
        if value then
            autoFarmBone()
        end
    end
})

farmingTab:AddToggle("Fast Attack", {
    Title = "Enable Fast Attack",
    Default = false,
    Callback = function(value)
        _G.FastAttack = value
        if value then
            fastAttack()
        end
    end
})

-- Menu and Appearance
Window:AddTab("Appearance"):AddLabel("Kenon Hub UI - Modern and Optimized")
Window:AddTab("Settings"):AddLabel("Press [END] to minimize the script.")

-- Final Touches
Window:Show()
print("Kenon Hub loaded successfully!")
